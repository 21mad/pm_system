<p style="color: green"><%= notice %></p>
<h1>Проект</h1>
<%= render @project %>

<h1>Задачи</h1>

<h2>Добавить задачу (если ты PM)</h2>
<%# params.require(:task).permit(:name, :description, :priority, :status, :due_date) %>
<%= flash[:error] %>
  <% if @task.errors.any? %>
    <div style="color: red">
      <h2>При сохранении проекта возникли ошибки:</h2>

      <ul>
        <% project.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
<%= form_with model: @task do |f| %>
  <div>
    <%= f.label :name, 'Задача' %>
    <%= f.text_field :name %>
  </div>
  <div>
    <%= f.label :priority, 'Приоритет' %>
    <%= f.number_field :priority %>
  </div>
  <div>
    <%= f.label :due_date, 'Дедлайн' %>
    <%= f.date_field :due_date %>
  </div>
  <%= f.hidden_field :status, value: false %>
  <%= f.hidden_field :project_id, value: @project.id %>
  <div><%= f.submit %></div>
<% end %>
<p>Задача приоритет статус дедлайн</p>
<ul>
  <% @project.tasks.each do |task| %>
    <li id=row<%= task.id %>><%= button_to task.status ? 'Вернуть' : 'Сделать', task_path(task.id), method: :patch %> <%= task.id %> <%= task.name%> <%= task.priority %> <%= task.status %> <%= task.due_date %><%= button_to 'Удалить', task_path(task.id), method: :delete %></li>
  <% end %>
</ul>

<div>
  <%= link_to "Редактировать данный проект", edit_project_path(@project) %> |
  <%= link_to "Назад к проектам", projects_path %>

  <%= button_to "Удалить проект", @project, method: :delete %>
</div>
